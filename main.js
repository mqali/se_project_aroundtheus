!function(){"use strict";var t=class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_toggleButtonState(){let t=!1;this._inputEls.forEach(e=>{e.validity.valid||(t=!0)}),t?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_checkInputValidity(t){if(!t.validity.valid)return this._showInputError(t);this._hideInputError(t)}_setEventListeners(){this._toggleButtonState(),this._inputEls.forEach(t=>{t.addEventListener("input",()=>{this._checkInputValidity(t),this._toggleButtonState()})})}enableValidation(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._form.addEventListener("submit",t=>{t.preventDefault()}),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach(t=>{this._hideInputError(t)})}},e=class{constructor(t,e,s){this._name=t.name,this._link=t.link,this._alt=t.alt,this._handleImageClick=s,this._cardSelector=e}_setEventListeners(){this._button.addEventListener("click",()=>{this._button.classList.toggle("card__like-button_active")}),this._cardDeleteButton.addEventListener("click",()=>{this._element.remove()}),this._cardImageElement.addEventListener("click",()=>{this._handleImageClick(this._link,this._name,this._alt)})}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){this._element=this._getTemplate();const t=this._element.querySelector(".card__like-button");this._button=t;const e=this._element.querySelector(".card__trash-button");this._cardDeleteButton=e;const s=this._element.querySelector(".card__image");return this._cardImageElement=s,this._element.querySelector(".card__title").textContent=this._name,this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._alt,this._setEventListeners(),this._element}};const s={inputSelector:".modal__form-input",submitButtonSelector:".modal__button ",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class n{constructor(t){this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleOverlayEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleOverlayEsc)}_handleOverlayEsc=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",t=>{(t.target===this._popupElement||t.target.classList.contains("modal__close"))&&this.close()})}}class o extends n{constructor(t,e){super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=e,this._formInputs=this._popupForm.querySelectorAll(".modal__form-input")}_getInputValues(){const t={};return this._formInputs.forEach(e=>{t[e.name]=e.value}),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",t=>{t.preventDefault();const e=this._getInputValues();this._handleFormSubmit(e),this._popupForm.reset(),this.close()})}}const i=document.querySelector("#profile-edit-form"),r=document.querySelector("#add-card-form"),a=document.querySelector("#profile-edit-button"),l=document.querySelector(".profile__add-button"),c=new t(s,i);c.enableValidation();const u=new t(s,r);function _(t){const s=new e(t,"#card-template",d).getView();h.addItem(s)}u.enableValidation();const m=new class extends n{constructor(t){super(t),this._imagePopup=this._popupElement.querySelector(".modal__preview-image"),this._imageTitle=this._popupElement.querySelector(".modal__title")}open(t){this._imagePopup.src=t.link,this._imagePopup.alt=t.name,this._imageTitle.textContent=t.name,super.open()}}(".js-preview-modal");function d(t,e,s){m.open({link:t,name:e,alt:s})}m.setEventListeners();const p=new class{constructor({profileName:t,profileJob:e}){this._profileName=t,this._profileJob=e}getUserInfo(){const t=document.querySelector(this._profileName),e=document.querySelector(this._profileJob);return{name:t.textContent,job:e.textContent}}setUserInfo(t){const e=document.querySelector(this._profileName),s=document.querySelector(this._profileJob);e.textContent=t.name,s.textContent=t.job}}({profileName:".profile__title",profileJob:".profile__description"}),h=new class{constructor({items:t,renderer:e},s){this._items=t,this._renderer=e,this._containerSelector=s,this._container=document.querySelector(s)}renderItems(){this._items.forEach(t=>{this._renderer(t)})}addItem(t){this._container.prepend(t)}}({items:[{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"}],renderer:_},".cards__list");h.renderItems();const E=new o("#profile-edit-modal",t=>{p.setUserInfo({name:t.title,job:t.description}),E.close()});E.setEventListeners();const v=new o("#add-card-modal",t=>{_({name:t.title,link:t.link}),r.reset(),u.resetValidation(),v.close()});v.setEventListeners();const f=i.querySelector('input[name="title"]'),g=i.querySelector('input[name="description"]');a.addEventListener("click",()=>{const t=p.getUserInfo();f.value=t.name,g.value=t.job,c.resetValidation(),E.open()}),l.addEventListener("click",()=>{v.open()})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICBmb3VuZEludmFsaWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGZvdW5kSW52YWxpZCkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX2FsdCA9IGNhcmREYXRhLmFsdDtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcblxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSwgdGhpcy5fYWx0KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2J1dHRvbiA9IGxpa2VCdXR0b247XG5cbiAgICBjb25zdCBkZWxldGVDYXJkID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gZGVsZXRlQ2FyZDtcblxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gY2FyZEltYWdlO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fYWx0O1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uIFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5RXNjKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlFc2MpO1xuICB9XG5cbiAgX2hhbmRsZU92ZXJsYXlFc2MgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldmVudC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fFxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuXG4gICAgICAvLyBQcm9jZXNzIHRoZSBkYXRhIGZpcnN0XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcblxuICAgICAgLy8gT25seSBjbGVhciBBRlRFUiBzdWNjZXNzXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyogcHJldHRpZXItaWdub3JlICovXG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5cbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWZvcm1cIik7XG5jb25zdCBhZGRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm1cbik7XG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGFkZEZvcm1FbGVtZW50KTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBuZXdQb3B1cCk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZXRWaWV3KCk7XG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG59XG5cbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIuanMtcHJldmlldy1tb2RhbFwiKTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gbmV3UG9wdXAobGluaywgbmFtZSwgYWx0KSB7XG4gIHBvcHVwSW1hZ2Uub3Blbih7IGxpbmssIG5hbWUsIGFsdCB9KTtcbn1cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBwcm9maWxlTmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZUpvYjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbn0pO1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vLyBQcm9maWxlIEVkaXQgUG9wdXBcbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIChpbnB1dERhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiBpbnB1dERhdGEudGl0bGUsXG4gICAgICBqb2I6IGlucHV0RGF0YS5kZXNjcmlwdGlvbixcbiAgICB9KTtcbiAgICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XG4gIH1cbik7XG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEFkZCBDYXJkIFBvcHVwXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCAoaW5wdXREYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmREYXRhID0ge1xuICAgIG5hbWU6IGlucHV0RGF0YS50aXRsZSxcbiAgICBsaW5rOiBpbnB1dERhdGEubGluayxcbiAgfTtcblxuICByZW5kZXJDYXJkKGNhcmREYXRhKTtcblxuICBhZGRGb3JtRWxlbWVudC5yZXNldCgpO1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbn0pO1xuXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gTWFudWFsbHkgcG9wdWxhdGUgdGhlIGZvcm0gZmllbGRzXG5jb25zdCBuYW1lSW5wdXQgPSBwcm9maWxlRWRpdEZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInRpdGxlXCJdJyk7XG5jb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVFZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZGVzY3JpcHRpb25cIl0nKTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBuYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uam9iO1xuXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VQb3B1cCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIlxuICAgICk7XG4gICAgdGhpcy5faW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlUG9wdXAuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlUG9wdXAuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gcHJvZmlsZU5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IHByb2ZpbGVKb2I7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3Byb2ZpbGVOYW1lKTtcbiAgICBjb25zdCBqb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wcm9maWxlSm9iKTtcblxuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgbmFtZTogbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IGpvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcblxuICAgIHJldHVybiB1c2VySW5mbztcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICBjb25zdCBuYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcHJvZmlsZU5hbWUpO1xuICAgIGNvbnN0IGpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3Byb2ZpbGVKb2IpO1xuXG4gICAgbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuam9iO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybUVsIiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvdW5kSW52YWxpZCIsIl9pbnB1dEVscyIsImZvckVhY2giLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0IiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2FsdCIsImFsdCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9idXR0b24iLCJ0b2dnbGUiLCJfY2FyZERlbGV0ZUJ1dHRvbiIsIl9lbGVtZW50IiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwibGlrZUJ1dHRvbiIsImRlbGV0ZUNhcmQiLCJjYXJkSW1hZ2UiLCJzcmMiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVPdmVybGF5RXNjIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtSW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsImV2dCIsInJlc2V0IiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkRm9ybUVsZW1lbnQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZE5ld0NhcmRCdXR0b24iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwicmVuZGVyQ2FyZCIsImNhcmRFbGVtZW50IiwiQ2FyZCIsIm5ld1BvcHVwIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJwb3B1cEltYWdlIiwiX2ltYWdlUG9wdXAiLCJfaW1hZ2VUaXRsZSIsImRhdGEiLCJ1c2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiZ2V0VXNlckluZm8iLCJuYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJqb2IiLCJzZXRVc2VySW5mbyIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXJTZWxlY3RvciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwicHJvZmlsZUVkaXRQb3B1cCIsImlucHV0RGF0YSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJhZGRDYXJkUG9wdXAiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImN1cnJlbnRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=